<!DOCTYPE html>
<html lang="ja-JP">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="keywords" content="Simple Directmedia Layer SDL3.0">
<link rel="top" href="index.html" title="ホーム">
<link rel="parent" href="CategoryIntrinsics.html" title="1つ上">
<title>SDL_TARGETING</title>
</head>
<body>
<a href="index.html">目次</a> - <a href="ApiByCategory.html">SDL 3.0 API(機能別)</a> - <a href="CategoryIntrinsics.html">組み込み関数の検知</a> - SDL_TARGETING
<hr>
<h1>SDL_TARGETING</h1>
特定のCPUアーキテクチャを対象とした関数のタグ付けのマクロ
<h2>ヘッダ</h2>
<a href="https://github.com/libsdl-org/SDL/blob/main/include/SDL3/SDL_intrin.h">SDL3/SDL_intrin.h</a>
<h2>構文</h2>
<code>#define SDL_TARGETING(x) __attribute__((target(x)))</code>
<h2>詳細</h2>
<p>
これは, プログラムの他の部分は別でも, 特定の関数を特定のCPU命令セットでビルドしたい場合のコンパイラのヒントである
</p>
<p>
詳細はGCCのドキュメントに記述されている:
</p>
<p>
<a href="https://gcc.gnu.org/onlinedocs/gcc/Common-Function-Attributes.html#index-target-function-attribute">https://gcc.gnu.org/onlinedocs/gcc/Common-Function-Attributes.html#index-target-function-attribute</a>
</p>
<p>
この機能を使用して, ソースコードの他の部分はSSE2コードを使用しない場合でも, 特定の関数をSSE2対応にする例:
</p>
<p>
<code>
<pre>
#ifdef SDL_SSE2_INTRINSICS
static void SDL_TARGETING("sse2") DoSomethingWithSSE2(char *x) {
   ..ここでSSE組み込み関数を使用する, など...
}
#endif

// その後で...
#ifdef SDL_SSE2_INTRINSICS
if (SDL_HasSSE2()) {
    DoSomethingWithSSE2(str);
}
#endif
</pre>
</code>
</p>
<p>
アプリケーションは, 全体的にはSSE2の命令セットを使用せずにビルドされており, SSE2に対応していないIntelマシンでも実行できる.
しかし, 実行時にシステムが対応する命令をチェックし, 対応しているならばSSE2命令を使用する関数を呼び出す.
ifdefはSSE2命令のない環境ならばこのコードを実行しないようにするためのものである.
</p>
<p>
コンパイラが対応していない場合, 何もない定義になる.
</p>
<p>
このシンボルはSDL内部で使用されているが, アプリケーションや他のライブラリもそのインターフェースで使ってもよい.
</p>
<h2>バージョン</h2>
SDL 3.2.0以降
<h2>SDL Wikiへのリンク</h2>
<a href="https://wiki.libsdl.org/SDL3/SDL_TARGETING">SDL_TARGETING - SDL Wiki</a>
<hr>
</body>
</html>
