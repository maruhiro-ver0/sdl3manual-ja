<!DOCTYPE html>
<html lang="ja-JP">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="keywords" content="Simple Directmedia Layer SDL3.0">
<link rel="top" href="index.html" title="ホーム">
<link rel="parent" href="ApiByCategory.html" title="1つ上">
<title>力覚フィードバック</title>
</head>
<body>
<a href="index.html">目次</a> - <a href="ApiByCategory.html">SDL 3.0 API(機能別)</a> - 力覚フィードバック
<hr>
<h1>力覚フィードバック</h1>
<h2>概要</h2>
<p>
SDLハプティックサブシステムはハプティックデバイス(力覚装置)を扱う.
</p>
<p>
基本的な使い方は次の通りである.
<ol>
<li>サブシステム(<a href="SDL_Init.html">SDL_INIT_HAPTIC</a>)を初期化する
<li>ハプティックデバイスを開く
<ul>
<li><a href="SDL_OpenHaptic.html">SDL_OpenHaptic()</a>でインスタンスIDを指定して開く
<li><a href="SDL_OpenHapticFromJoystick.html">SDL_OpenHapticFromJoystick()</a>でジョイスティックから開く
</ul>
<li>エフェクトを生成する (<a href="SDL_HapticEffect.html">SDL_HapticEffect</a>)
<li>エフェクトを<a href="SDL_CreateHapticEffect.html">SDL_CreateHapticEffect()</a>でアップロードする
<li>エフェクトを<a href="SDL_RunHapticEffect.html">SDL_RunHapticEffect()</a>で再生する
<li>(任意) エフェクトを<a href="SDL_DestroyHapticEffect.html">SDL_DestroyHapticEffect()</a>で解放する
<li>ハプティックデバイスを<a href="SDL_CloseHaptic.html">SDL_CloseHaptic()</a>で閉じる
</ol>
</p>
<h3>振動させる簡単な例</h3>
<p>
<code>
<pre>
   SDL_Haptic *haptic = NULL;

   // デバイスを開く
   SDL_HapticID *haptics = SDL_GetHaptics(NULL);
   if (haptics) {
       haptic = SDL_OpenHaptic(haptics[0]);
       SDL_free(haptics);
   }
   if (haptic == NULL)
      return;

   // 単純な振動で初期化する
   if (!SDL_InitHapticRumble(haptic))
      return;

   // 50%の強さで2秒間再生する
   if (!SDL_PlayHapticRumble(haptic, 0.5, 2000))
      return;
   SDL_Delay(2000);

   // 終了する
   SDL_CloseHaptic(haptic);
</pre>
</code>
</p>
<h3>完全なコード</h3>
<p>
<code>
<pre>
bool test_haptic(SDL_Joystick *joystick)
{
   SDL_Haptic *haptic;
   SDL_HapticEffect effect;
   SDL_HapticEffectID effect_id;

   // デバイスを開く
   haptic = SDL_OpenHapticFromJoystick(joystick);
   if (haptic == NULL) return false; // ジョイスティックにハプティックがない場合が大半

   // サイン波が可能か調べる
   if ((SDL_GetHapticFeatures(haptic) &amp; SDL_HAPTIC_SINE)==0) {
      SDL_CloseHaptic(haptic); // サインエフェクトがない
      return false;
   }

   // エフェクトを生成する
   SDL_memset(&amp;effect, 0, sizeof(SDL_HapticEffect)); // 安全のためデフォルトを0にする
   effect.type = SDL_HAPTIC_SINE;
   effect.periodic.direction.type = SDL_HAPTIC_POLAR; // 極座標系
   effect.periodic.direction.dir[0] = 18000; // エフェクトは南から来る
   effect.periodic.period = 1000; // 1000ミリ秒
   effect.periodic.magnitude = 20000; // 20000/32767 の強さ
   effect.periodic.length = 5000; // 5秒間
   effect.periodic.attack_length = 1000; // 1秒間で最大に達する
   effect.periodic.fade_length = 1000; // 1秒間で停止する

   // エフェクトをアップロードする
   effect_id = SDL_CreateHapticEffect(haptic, &amp;effect);

   // エフェクトをテストする
   SDL_RunHapticEffect(haptic, effect_id, 1);
   SDL_Delay(5000); // エフェクトが終わるまで待つ

   // エフェクトを破棄する. これはデバイスを閉じても行われる
   SDL_DestroyHapticEffect(haptic, effect_id);

   // デバイスを閉じる
   SDL_CloseHaptic(haptic);

   return true; // 成功
}
</pre>
</code>
</p>
<p>
SDLハプティックサブシステムはスレッドセーフではないので注意すること.
</p>
<h2>関数</h2>
<ol>
<li><a href="SDL_CloseHaptic.html">SDL_CloseHaptic</a> - SDL_OpenHaptic()でオープンしたハプティックデバイスをクローズする
<li><a href="SDL_CreateHapticEffect.html">SDL_CreateHapticEffect</a> - ハプティックデバイスに新しいエフェクトを生成する
<li><a href="SDL_DestroyHapticEffect.html">SDL_DestroyHapticEffect</a> - ハプティックデバイスのエフェクトを再生する
<li><a href="SDL_GetHapticEffectStatus.html">SDL_GetHapticEffectStatus</a> - ハプティックデバイスのエフェクトの再生状態を得る
<li>SDL_GetHapticFeatures
<li>SDL_GetHapticFromID
<li>SDL_GetHapticID
<li><a href="SDL_GetHapticName.html">SDL_GetHapticName</a> - ハプティックデバイスの実装に依存する名前を得る
<li>SDL_GetHapticNameForID
<li><a href="SDL_GetHaptics.html">SDL_GetHaptics</a> - 接続されているハプティックデバイスの一覧を得る
<li>SDL_GetMaxHapticEffects
<li>SDL_GetMaxHapticEffectsPlaying
<li>SDL_GetNumHapticAxes
<li>SDL_HapticEffectSupported
<li>SDL_HapticRumbleSupported
<li>SDL_InitHapticRumble
<li>SDL_IsJoystickHaptic
<li>SDL_IsMouseHaptic
<li><a href="SDL_OpenHaptic.html">SDL_OpenHaptic</a> - ハプティックデバイスを使用するためにオープンする
<li><a href="SDL_OpenHapticFromJoystick.html">SDL_OpenHapticFromJoystick</a> - ジョイスティックからハプティックデバイスをオープンする
<li><a href="SDL_OpenHapticFromMouse.html">SDL_OpenHapticFromMouse</a> - 使用中のマウスからハプティックデバイスをオープンする
<li>SDL_PauseHaptic
<li>SDL_PlayHapticRumble
<li>SDL_ResumeHaptic
<li><a href="SDL_RunHapticEffect.html">SDL_RunHapticEffect</a> - ハプティックデバイスのエフェクトを再生する
<li>SDL_SetHapticAutocenter
<li>SDL_SetHapticGain
<li>SDL_StopHapticEffect
<li>SDL_StopHapticEffects
<li>SDL_StopHapticRumble
<li>SDL_UpdateHapticEffect
</ol>
<h2>型</h2>
<ol>
<li><a href="SDL_Haptic.html">SDL_Haptic</a> - SDLハプティックデバイスオブジェクトの型
<li><a href="SDL_HapticDirectionType.html">SDL_HapticDirectionType</a> - ハプティックの方向で使用する座標系の型
<li><a href="SDL_HapticEffectID.html">SDL_HapticEffectID</a> - ハプティックエフェクトIDの型
<li><a href="SDL_HapticEffectType.html">SDL_HapticEffectType</a> - ハプティックエフェクトの種類の型
<li><a href="SDL_HapticID.html">SDL_HapticID</a> - システムに接続されたハプティックデバイスのユニークなIDの型
</ol>
<h2>構造体</h2>
<ol>
<li><a href="SDL_HapticCondition.html">SDL_HapticCondition</a> - 条件エフェクトのテンプレートの構造体
<li><a href="SDL_HapticConstant.html">SDL_HapticConstant</a> - 一定エフェクトのテンプレートの構造体
<li><a href="SDL_HapticCustom.html">SDL_HapticCustom</a> - カスタムエフェクトのテンプレートの構造体
<li><a href="SDL_HapticDirection.html">SDL_HapticDirection</a> - エフェクトの方向の構造体
<li><a href="SDL_HapticEffect.html">SDL_HapticEffect</a> - ハプティックエフェクトの全テンプレートの共用体
<li><a href="SDL_HapticLeftRight.html">SDL_HapticLeftRight</a> - 左右エフェクトのテンプレートの構造体
<li><a href="SDL_HapticPeriodic.html">SDL_HapticPeriodic</a> - 周期エフェクトのテンプレートの構造体
<li><a href="SDL_HapticRamp.html">SDL_HapticRamp</a> - 増減エフェクトのテンプレートの構造体
</ol>
<h2>マクロ</h2>
<ol>
<li>SDL_HAPTIC_AUTOCENTER
<li><a href="SDL_HAPTIC_CARTESIAN.html">SDL_HAPTIC_CARTESIAN</a> - ハプティックデバイスのエフェクトの方向で直交座標を使用することを表すマクロ
<li><a href="SDL_HAPTIC_CONSTANT.html">SDL_HAPTIC_CONSTANT</a> - ハプティックデバイスの一定エフェクトを表すマクロ
<li><a href="SDL_HAPTIC_CUSTOM.html">SDL_HAPTIC_CUSTOM</a> - ハプティックデバイスのカスタムエフェクトを表すマクロ
<li><a href="SDL_HAPTIC_DAMPER.html">SDL_HAPTIC_DAMPER</a> - ハプティックデバイスのダンパーエフェクト(速度を使用)を表すマクロ
<li><a href="SDL_HAPTIC_FRICTION.html">SDL_HAPTIC_FRICTION</a> - ハプティックデバイスの摩擦エフェクト(運動を使用)を表すマクロ
<li>SDL_HAPTIC_GAIN
<li><a href="SDL_HAPTIC_INERTIA.html">SDL_HAPTIC_INERTIA</a> - ハプティックデバイスの慣性エフェクト(加速度を使用)を表すマクロ
<li><a href="SDL_HAPTIC_INFINITY.html">SDL_HAPTIC_INFINITY</a> - ハプティックデバイスの無限の再生回数のマクロ
<li><a href="SDL_HAPTIC_LEFTRIGHT.html">SDL_HAPTIC_LEFTRIGHT</a> - ハプティックデバイスの左右エフェクトを表すマクロ
<li>SDL_HAPTIC_PAUSE
<li><a href="SDL_HAPTIC_POLAR.html">SDL_HAPTIC_POLAR</a> - ハプティックデバイスのエフェクトの方向で極座標を使用することを表すマクロ
<li><a href="SDL_HAPTIC_RAMP.html">SDL_HAPTIC_RAMP</a> - ハプティックデバイスの増減エフェクトを表すマクロ
<li>SDL_HAPTIC_RESERVED1
<li>SDL_HAPTIC_RESERVED2
<li>SDL_HAPTIC_RESERVED3
<li><a href="SDL_HAPTIC_SAWTOOTHDOWN.html">SDL_HAPTIC_SAWTOOTHDOWN</a> - ハプティックデバイスの下降ノコギリ波エフェクトを表すマクロ
<li><a href="SDL_HAPTIC_SAWTOOTHUP.html">SDL_HAPTIC_SAWTOOTHUP</a> - ハプティックデバイスの上昇ノコギリ波エフェクトを表すマクロ
<li><a href="SDL_HAPTIC_SINE.html">SDL_HAPTIC_SINE</a> - ハプティックデバイスのサイン波エフェクトを表すマクロ
<li><a href="SDL_HAPTIC_SPHERICAL.html">SDL_HAPTIC_SPHERICAL</a> - ハプティックデバイスのエフェクトの方向で球面座標を使用することを表すマクロ
<li><a href="SDL_HAPTIC_SPRING.html">SDL_HAPTIC_SPRING</a> - ハプティックデバイスのバネエフェクト(位置を使用)を表すマクロ
<li><a href="SDL_HAPTIC_SQUARE.html">SDL_HAPTIC_SQUARE</a> - ハプティックデバイスの矩形波エフェクトを表すマクロ
<li>SDL_HAPTIC_STATUS
<li>SDL_HAPTIC_STEERING_AXIS
<li><a href="SDL_HAPTIC_TRIANGLE.html">SDL_HAPTIC_TRIANGLE</a> - ハプティックデバイスの三角波エフェクトを表すマクロ
</ol>
<h2>SDL Wikiへのリンク</h2>
<a href="https://wiki.libsdl.org/SDL3/CategoryHaptic">SDL3/CategoryHaptic - SDL Wiki</a>
<hr>
</body>
</html>
