<!DOCTYPE html>
<html lang="ja-JP">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="keywords" content="Simple Directmedia Layer SDL3.0">
<link rel="top" href="index.html" title="ホーム">
<link rel="parent" href="ApiByCategory.html" title="1つ上">
<title>再生と録音</title>
</head>
<body>
<a href="index.html">目次</a> - <a href="ApiByCategory.html">SDL 3.0 API(機能別)</a> - 再生と録音
<hr>
<h1>再生と録音</h1>
<h2>概要</h2>
<p>
SDLライブラリのオーディオ機能.
</p>
<p>
SDL3では全てのオーディオは<a href="SDL_AudioStream.html">SDL_AudioStream</a>を中心としている.
音声の再生, 録音, 変換, ストリーム化, バッファリング, ミックスの全ての場合でオーディオストリームを経由することになる.
</p>
<p>
オーディオストリームは非常に柔軟である.
いつでも任意の形式の任意の量のデータを受け入れることができ, どちらかの側が途中で形式が変わったとしても他の形式で出力できる.
</p>
<p>
アプリケーションがオーディオデバイスを開き, それを任意の番号のオーディオストリームとバインドし, 可能ならばデータを与える.
デバイスがさらにデータを必要とした場合は, デバイスは全てのバインドされたストリームからデータを得て, それをミックスして再生する.
</p>
<p>
オーディオストリームは, アプリケーションがあらかじめ設定したコールバックを利用して必要なたびにデータを供給することもできる. これはSDL2のオーディオモデルに対応している.
</p>
<p>
プログラムのデータの基本的な読み込みのために, SDLはSDL_LoadWAV(もしファイルから読み込まないならばSDL_LoadWAV_IOも)で簡単な.WAVローダも提供している.
</p>
<h3>論理オーディオデバイス</h3>
<p>
SDL3では, 物理的なデバイス(SoundBlaster 16 Proのような)を開くと, 論理デバイスIDが割り振られ, それをオーディオストリームとバインドできるようになる.
ほとんど全ての場合, APIは論理デバイスを物理デバイスと同じように扱う.
しかし, デバイスを開くたびに新しい論理デバイスが生成されるため, プログラムの異なる箇所(例えばVoIPライブラリ, テキスト読み上げフレームワーク, あるいはSDL上の異なる種類のミキサー)でデバイスを開いていても互いに干渉せず, 
それぞれの論理デバイスで別々にミックスした後で1つのバッファに落とし込み, 背後で物理デバイスに供給する.
全ての論理デバイスは必要ならばいつでも追加と削除を行える.
SDLがOSレベルで物理デバイスを開くのは一度だけで, その後の全ての論理デバイスは内部で管理される.
</p>
<p>
論理デバイスには別の利点もある:
物理デバイスを指定せずにオープンすると, SDLは環境が変わったとき自動的にその論理デバイスを自動的に別のハードウェアに切り替える: ユーザがヘッドホンを挿した, システムのデフォルトが変わった場合などである.
SDLはユーザに再生を途切れさせることなく論理デバイスを正しい物理デバイスに切り替えるためユーザにそのことを意識させることはない.
アプリケーションも求めない限り切り替えを知る必要はない.
</p>
<h3>簡略化されたオーディオ</h3>
<p>
単に1つの音声源のみ必要な簡略化されたモデルの場合, <a href="SDL_OpenAudioDeviceStream.html">SDL_OpenAudioDeviceStream</a>を使うことができる. これはオーディオデバイスのオープン, オーディオストリームの生成, オープンしたデバイスとストリームのバインド, オーディオデータの獲得を行うコールバックの登録(任意)を1つの関数で行える.
この関数を使う場合, 主要なインターフェースは<a href="SDL_AudioStream.html">SDL_AudioStream</a>で, デバイスのハンドルはほとんど隠される.
この関数で生成したストリームを破棄するとデバイスもクローズされる, ストリームのバインドを変えることができない, などのためである.
この関数を使った場合の別の異なる点は, デバイスは一時停止状態から始まり, 明示的に一時停止を解除する必要があることである.
これはSDL2からの移行を簡単にするためと, 再生が始まる前にアプリケーションがさらにセットアップを必要とする可能性があるためである.
簡略化されていないものの場合, ストリームをデバイスにバインドする前で何も再生されないため, 一時停止解除の状態から始まる.
</p>
<h3>チャネルレイアウト</h3>
<p>
SDLに渡すオーディオデータは, 無圧縮の交互に配置されたPCMデータである.
MP3なども自身でデコードすれば渡せるが, 直接渡すことはできない.
データの各チャネルの配置の順序は決められている.
</p>
<p>
略語:
</p>
<ul>
<li>FRONT = 正面スピーカー
<li>FL = 前面左側スピーカー
<li>FR = 前面右側スピーカー
<li>FC = 前面正面スピーカー
<li>BL = 背面左側スピーカー
<li>BR = 背面右側スピーカー
<li>SR = サラウンド右スピーカー
<li>SL = サラウンド左スピーカー
<li>BC = 背面中央スピーカー
<li>LFE = 低音スピーカー
</ul>
<p>
次の一覧はメモリ上の配置順で, 例えば"FL, FR"は, 正面左側スピーカーがメモリ上の先で, その次が正面右側, その後はそれを繰り返すことを意味している.
</p>
<ul>
<li>1チャネル(モノラル) レイアウト: FRONT
<li>2チャネル(ステレオ) レイアウト: FL, FR
<li>3チャネル(2.1) レイアウト: FL, FR, LFE
<li>4チャネル(クアッド) レイアウト: FL, FR, BL, BR
<li>5チャネル(4.1) レイアウト: FL, FR, LFE, BL, BR
<li>6チャネル(5.1) レイアウト: FL, FR, FC, LFE, BL, BR (最後の2つはSL, SRの場合もある)
<li>7チャネル(6.1) レイアウト: FL, FR, FC, LFE, BC, SL, SR
<li>8チャネル(7.1) レイアウト: FL, FR, FC, LFE, BL, BR, SL, SR
</ul>
<p>
この順序はDirectSoundと同じだが, 全ての環境に適用される. SDLは異なる順序の環境でも必要に応じてチャネルを入れ替える.
</p>
<p>
様々なオーディオ処理の場合のために, <a href="SDL_AudioStream.html">SDL_AudioStream</a>はこの順序を変更するためのチャネルの対応付けを提供できる.
</p>
<h2>関数</h2>
<ol>
<li><a href="SDL_AudioDevicePaused.html">SDL_AudioDevicePaused</a> - オーディオデバイスが一時停止中かチェックする
<li><a href="SDL_AudioStreamDevicePaused.html">SDL_AudioStreamDevicePaused</a> - オーディオデバイスに関連付けられたオーディオストリームが一時停止中かチェックする
<li><a href="SDL_BindAudioStream.html">SDL_BindAudioStream</a> - 1つのオーディオストリームをオーディオデバイスにバインドする
<li><a href="SDL_BindAudioStreams.html">SDL_BindAudioStreams</a> - オーディオストリームの一覧をオーディオデバイスにバインドする
<li><a href="SDL_ClearAudioStream.html">SDL_ClearAudioStream</a> - オーディオストリームの保留中のデータを消去する
<li><a href="SDL_CloseAudioDevice.html">SDL_CloseAudioDevice</a> - オーディオデバイスをクローズする 
<li><a href="SDL_ConvertAudioSamples.html">SDL_ConvertAudioSamples</a> - オーディオデータを別の形式に変換する
<li><a href="SDL_CreateAudioStream.html">SDL_CreateAudioStream</a> - オーディオストリームを生成する 
<li><a href="SDL_DestroyAudioStream.html">SDL_DestroyAudioStream</a> - オーディオストリームを破棄する
<li><a href="SDL_FlushAudioStream.html">SDL_FlushAudioStream</a> - オーディオストリームにデータ送信の完了を伝える
<li><a href="SDL_GetAudioDeviceChannelMap.html">SDL_GetAudioDeviceChannelMap</a> - オーディオデバイスの現在のチャネルマップを得る
<li><a href="SDL_GetAudioDeviceFormat.html">SDL_GetAudioDeviceFormat</a> - オーディオデバイスの現在の形式を得る
<li><a href="SDL_GetAudioDeviceGain.html">SDL_GetAudioDeviceGain</a> - オーディオデバイスのゲインを得る
<li><a href="SDL_GetAudioDeviceName.html">SDL_GetAudioDeviceName</a> - オーディオデバイスの人間が読める名前を得る
<li><a href="SDL_GetAudioDriver.html">SDL_GetAudioDriver</a> - 組み込まれたオーディオドライバの名前を得る
<li><a href="SDL_GetAudioFormatName.html">SDL_GetAudioFormatName</a> - 人間が読めるオーディオ形式の名前を得る
<li><a href="SDL_GetAudioPlaybackDevices.html">SDL_GetAudioPlaybackDevices</a> - 現在接続されているオーディオ再生デバイスの一覧を得る
<li><a href="SDL_GetAudioRecordingDevices.html">SDL_GetAudioRecordingDevices</a> - 現在接続されているオーディオ録音デバイスの一覧を得る
<li><a href="SDL_GetAudioStreamAvailable.html">SDL_GetAudioStreamAvailable</a> - オーディオストリームの利用可能な変換/再サンプリングされたバイト数を得る
<li><a href="SDL_GetAudioStreamData.html">SDL_GetAudioStreamData</a>- オーディオストリームから変換/再サンプリングされたデータを得る
<li><a href="SDL_GetAudioStreamDevice.html">SDL_GetAudioStreamDevice</a> - オーディオストリームにバインドされたデバイスを得る
<li><a href="SDL_GetAudioStreamFormat.html">SDL_GetAudioStreamFormat</a> - オーディオストリームの形式を得る
<li><a href="SDL_GetAudioStreamFrequencyRatio.html">SDL_GetAudioStreamFrequencyRatio</a> - オーディオストリームの周波数の倍率を得る
<li><a href="SDL_GetAudioStreamGain.html">SDL_GetAudioStreamGain</a> - オーディオストリームのゲインを得る
<li><a href="SDL_GetAudioStreamInputChannelMap.html">SDL_GetAudioStreamInputChannelMap</a> - オーディオストリームの入力チャネルマップを得る
<li><a href="SDL_GetAudioStreamOutputChannelMap.html">SDL_GetAudioStreamOutputChannelMap</a> - オーディオストリームの出力チャネルマップを得る
<li><a href="SDL_GetAudioStreamProperties.html">SDL_GetAudioStreamProperties</a> - オーディオストリームに関連付けられたプロパティを得る
<li><a href="SDL_GetAudioStreamQueued.html">SDL_GetAudioStreamQueued</a> - オーディオストリームのキューに入力されたデータのバイト数を得る
<li><a href="SDL_GetCurrentAudioDriver.html">SDL_GetCurrentAudioDriver</a> - 現在のオーディオドライバの名前を得る
<li><a href="SDL_GetNumAudioDrivers.html">SDL_GetNumAudioDrivers</a> - 組み込まれたオーディオドライバの数を得る
<li><a href="SDL_GetSilenceValueForFormat.html">SDL_GetSilenceValueForFormat</a> - オーディオ形式に合ったmemsetで設定できる無音の値を得る
<li><a href="SDL_IsAudioDevicePhysical.html">SDL_IsAudioDevicePhysical</a> - オーディオデバイスが(論理デバイスではなく)物理デバイスかチェックする
<li><a href="SDL_IsAudioDevicePlayback.html">SDL_IsAudioDevicePlayback</a> - オーディオデバイスが(録音デバイスではなく)再生デバイスかチェックする
<li><a href="SDL_LoadWAV.html">SDL_LoadWAV</a> - WAVファイルを読み込む
<li><a href="SDL_LoadWAV_IO.html">SDL_LoadWAV_IO</a> - WAVファイルをメモリに読み込む
<li><a href="SDL_LockAudioStream.html">SDL_LockAudioStream</a> - オーディオストリームをアクセスの直列化のためロックする
<li><a href="SDL_MixAudio.html">SDL_MixAudio</a> - オーディオデータをミックスする
<li><a href="SDL_OpenAudioDevice.html">SDL_OpenAudioDevice</a> - オーディオデバイスをオープンする 
<li><a href="SDL_OpenAudioDeviceStream.html">SDL_OpenAudioDeviceStream</a> - 簡単のため典型的なオーディオの初期化を一度に行う関数
<li><a href="SDL_PauseAudioDevice.html">SDL_PauseAudioDevice</a> - オーディオデバイスの再生を一時停止する
<li><a href="SDL_PauseAudioStreamDevice.html">SDL_PauseAudioStreamDevice</a> - オーディオデバイスに関連付けられたオーディオストリームの再生を一時停止する
<li><a href="SDL_PutAudioStreamData.html">SDL_PutAudioStreamData</a> - ストリームにデータを追加する
<li><a href="SDL_PutAudioStreamDataNoCopy.html">SDL_PutAudioStreamDataNoCopy</a> - ストリームにデータをコピーせずに追加する
<li><a href="SDL_PutAudioStreamPlanarData.html">SDL_PutAudioStreamPlanarData</a> - オーディオストリームにチャネルごとの配列に分けられたデータを追加する
<li><a href="SDL_ResumeAudioDevice.html">SDL_ResumeAudioDevice</a> - オーディオデバイスの再生の一時停止を解除する
<li><a href="SDL_ResumeAudioStreamDevice.html">SDL_ResumeAudioStreamDevice</a> - オーディオデバイスに関連付けられたオーディオストリームの一時停止を解除する
<li><a href="SDL_SetAudioDeviceGain.html">SDL_SetAudioDeviceGain</a> - オーディオデバイスのゲインを設定する
<li>SDL_SetAudioIterationCallbacks
<li>SDL_SetAudioPostmixCallback
<li>SDL_SetAudioStreamFormat
<li><a href="SDL_SetAudioStreamFrequencyRatio.html">SDL_SetAudioStreamFrequencyRatio</a> - オーディオストリームの周波数の倍率を設定する
<li>SDL_SetAudioStreamGain
<li>SDL_SetAudioStreamGetCallback
<li><a href="SDL_SetAudioStreamInputChannelMap.html">SDL_SetAudioStreamInputChannelMap</a> - オーディオストリームの入力チャネルマップを設定する
<li><a href="SDL_SetAudioStreamOutputChannelMap.html">SDL_SetAudioStreamOutputChannelMap</a> - オーディオストリームの出力チャネルマップを設定する
<li>SDL_SetAudioStreamPutCallback
<li><a href="SDL_UnbindAudioStream.html">SDL_UnbindAudioStream</a> - 1つのオーディオストリームのオーディオデバイスへのバインドを解除する
<li><a href="SDL_UnbindAudioStreams.html">SDL_UnbindAudioStreams</a> - 一覧のオーディオストリームのオーディオデバイスへのバインドを解除する
<li><a href="SDL_UnlockAudioStream.html">SDL_UnlockAudioStream</a> - オーディオストリームのアクセスの直列化のためのロックを解除する
</ol>
<h2>型</h2>
<ol>
<li><a href="SDL_AudioDeviceID.html">SDL_AudioDeviceID</a> - オーディオデバイスインスタンスIDの型
<li>SDL_AudioIterationCallback
<li>SDL_AudioPostmixCallback
<li><a href="SDL_AudioStream.html">SDL_AudioStream</a> - オーディオストリームを表す不透明型
<li><a href="SDL_AudioStreamCallback.html">SDL_AudioStreamCallback</a> - SDL_AudioStreamからデータを受け取ったとき呼ばれるコールバック関数の型 
<li>SDL_AudioStreamDataCompleteCallback
</ol>
<h2>構造体</h2>
<ol>
<li><a href="SDL_AudioSpec.html">SDL_AudioSpec</a> - オーディオデータの形式を表す構造体
</ol>
<h2>列挙体</h2>
<ol>
<li><a href="SDL_AudioFormat.html">SDL_AudioFormat</a> - オーディオ形式の列挙体
</ol>
<h2>マクロ</h2>
<ol>
<li><a href="SDL_AUDIO_BITSIZE.html">SDL_AUDIO_BITSIZE</a> - オーディオ形式から量子化ビット数を得るマクロ
<li><a href="SDL_AUDIO_BYTESIZE.html">SDL_AUDIO_BYTESIZE</a> - オーディオ形式から量子化バイト数を得るマクロ
<li><a href="SDL_AUDIO_DEVICE_DEFAULT_PLAYBACK.html">SDL_AUDIO_DEVICE_DEFAULT_PLAYBACK</a> - デフォルトの再生デバイスを要求する場合に使用する値のマクロ
<li><a href="SDL_AUDIO_DEVICE_DEFAULT_RECORDING.html">SDL_AUDIO_DEVICE_DEFAULT_RECORDING</a> - デフォルトの録音デバイスを要求する場合に使用する値のマクロ
<li><a href="SDL_AUDIO_FRAMESIZE.html">SDL_AUDIO_FRAMESIZE</a> - SDL_AudioSpecからオーディオフレームのバイト数を求めるマクロ
<li><a href="SDL_AUDIO_ISBIGENDIAN.html">SDL_AUDIO_ISBIGENDIAN</a> - オーディオ形式がビッグエンディアンのデータを扱うものかをチェックするマクロ
<li><a href="SDL_AUDIO_ISFLOAT.html">SDL_AUDIO_ISFLOAT</a> - オーディオ形式が浮動小数点データを扱うものかをチェックするマクロ
<li><a href="SDL_AUDIO_ISINT.html">SDL_AUDIO_ISINT</a> - オーディオ形式が整数データを扱うものかをチェックするマクロ
<li><a href="SDL_AUDIO_ISLITTLEENDIAN.html">SDL_AUDIO_ISLITTLEENDIAN</a> - オーディオ形式がリトルエンディアンのデータを扱うものかをチェックするマクロ
<li><a href="SDL_AUDIO_ISSIGNED.html">SDL_AUDIO_ISSIGNED</a> - オーディオ形式が符号ありのデータを扱うものかをチェックするマクロ
<li><a href="SDL_AUDIO_ISUNSIGNED.html">SDL_AUDIO_ISUNSIGNED</a> - オーディオ形式が符号なしのデータを扱うものかをチェックするマクロ
<li><a href="SDL_AUDIO_MASK_BIG_ENDIAN.html">SDL_AUDIO_MASK_BIG_ENDIAN</a> - SDL_AudioFormatのビッグエンディアンフラグのマスクのマクロ
<li><a href="SDL_AUDIO_MASK_BITSIZE.html">SDL_AUDIO_MASK_BITSIZE</a> - SDL_AudioFormatの量子化ビットサイズのマスクのマクロ
<li><a href="SDL_AUDIO_MASK_FLOAT.html">SDL_AUDIO_MASK_FLOAT</a> - SDL_AudioFormatの浮動小数点のマスクのマクロ
<li><a href="SDL_AUDIO_MASK_SIGNED.html">SDL_AUDIO_MASK_SIGNED</a> - SDL_AudioFormatの符号ありのマスクのマクロ
<li><a href="SDL_DEFINE_AUDIO_FORMAT.html">SDL_DEFINE_AUDIO_FORMAT</a> - オーディオ形式を定義するマクロ
</ol>
<h2>SDL Wikiへのリンク</h2>
<a href="https://wiki.libsdl.org/SDL3/CategoryAudio">SDL3/CategoryAudio - SDL Wiki</a>
<hr>
</body>
</html>
