<!DOCTYPE html>
<html lang="ja-JP">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="keywords" content="Simple Directmedia Layer SDL3.0">
<link rel="top" href="index.html" title="ホーム">
<link rel="parent" href="CategoryRender.html" title="1つ上">
<title>SDL_CreateSoftwareRenderer</title>
</head>
<body>
<a href="index.html">目次</a> - <a href="ApiByCategory.html">SDL 3.0 API(機能別)</a> - <a href="CategoryRender.html">2Dレンダリング</a> - SDL_CreateSoftwareRenderer
<hr>
<h1>SDL_CreateSoftwareRenderer</h1>
サーフェイスの2Dソフトウェアレンダリングコンテキストを作成する
<h2>ヘッダ</h2>
<a href="https://github.com/libsdl-org/SDL/blob/main/include/SDL3/SDL_render.h">SDL3/SDL_render.h</a>
<h2>構文</h2>
<code>SDL_Renderer * SDL_CreateSoftwareRenderer(SDL_Surface *surface);</code>
<h2>引数</h2>
<table border="1">
<tr><td><a href="SDL_Surface.html">SDL_Surface</a> *</td><td>surface</td><td>レンダリングを行うサーフェイス</td></tr>
</table>
<h2>戻り値</h2>
(<a href="SDL_Renderer.html">SDL_Renderer</a> *) 成功のときレンダリングコンテキスト, 失敗のときNULLを戻す.
<a href="SDL_GetError.html">SDL_GetError()</a>を呼んで詳細を知ることができる.
<h2>詳細</h2>
<p>
次の2つのAPIも<a href="SDL_Renderer.html">SDL_Renderer</a>を生成できる: <a href="SDL_CreateRenderer.html">SDL_CreateRenderer()</a>と<a href="SDL_CreateWindowAndRenderer.html">SDL_CreateWindowAndRenderer()</a>.
これらの関数<em>でも</em>ソフトウェアレンダラーを生成できるが, <a href="SDL_Surface.html">SDL_Surface</a>ではなく, 最終的に<a href="SDL_Window.html">SDL_Window</a>で使うことを想定している. 
</p>
<h2>スレッドセーフ</h2>
<p>
この関数を呼べるのはメインスレッドのみである.
</p>
<h2>バージョン</h2>
SDL 3.2.0以降
<h2>サンプルコード</h2>
<code>
<pre>
#include &lt;SDL3/SDL.h&gt;
#include &lt;SDL3/SDL_main.h&gt;

SDL_Window *window;
SDL_Renderer *renderer;
int done;

void DrawChessBoard(SDL_Renderer *renderer)
{
    int row = 0, column = 0, x = 0;
    SDL_FRect rect;
    SDL_Rect darea;

    /* 描画するサーフェイスのサイズを得る */
    SDL_GetRenderViewport(renderer, &amp;darea);

    SDL_SetRenderDrawColor(renderer, 0xFF, 0xFF, 0xFF, 0xFF);
    SDL_RenderClear(renderer);

    for (; row &lt; 8; row++) {
        column = row % 2;
        x = column;
        for (; column &lt; 4 + (row % 2); column++) {
            SDL_SetRenderDrawColor(renderer, 0, 0, 0, 0xFF);

            rect.w = (float)darea.w / 8;
            rect.h = (float)darea.h / 8;
            rect.x = x * rect.w;
            rect.y = row * rect.h;
            x = x + 2;
            SDL_RenderFillRect(renderer, &amp;rect);
        }
    }
    SDL_RenderPresent(renderer);
}

void loop()
{
    SDL_Event e;
    while (SDL_PollEvent(&e)) {
        if (e.type == SDL_EVENT_QUIT) {
            done = 1;
            return;
        }

        if ((e.type == SDL_EVENT_KEY_DOWN) && (e.key.key == SDLK_ESCAPE)) {
            done = 1;
            return;
        }
    }

    DrawChessBoard(renderer);

    /* レンダリングサーフェイスの処理が完了したならば, 
       ウィンドウを描いた画像で更新する */
    SDL_UpdateWindowSurface(window);
}

int main(int argc, char *argv[])
{
    SDL_Surface *surface;

    /* SDLを初期化する */
    if (!SDL_Init(SDL_INIT_VIDEO)) {
        SDL_LogError(SDL_LOG_CATEGORY_APPLICATION, "SDL_Initに失敗した : %s\n", SDL_GetError());
        return 1;
    }

    /* 指定のサーフェイスのウィンドウとレンダラを生成する */
    window = SDL_CreateWindow("チェス盤", 640, 480, 0);
    if (!window) {
        SDL_LogError(SDL_LOG_CATEGORY_APPLICATION, "ウィンドウの生成に失敗した : %s\n", SDL_GetError());
        return 1;
    }
    surface = SDL_GetWindowSurface(window);
    renderer = SDL_CreateSoftwareRenderer(surface);
    if (!renderer) {
        SDL_LogError(SDL_LOG_CATEGORY_APPLICATION, "サーフェイスのレンダラーの生成に失敗した : %s\n", SDL_GetError());
        return 1;
    }

    /* レンダリングサーフェイスに画像を描画する */
    done = 0;

    while (!done) {
        loop();
    }

    SDL_Quit();
    return 0;
}
</pre>
</code>
<h2>関連項目</h2>
<ul>
<li><a href="SDL_DestroyRenderer.html">SDL_DestroyRenderer</a>
</ul>
<h2>SDL Wikiへのリンク</h2>
<a href="https://wiki.libsdl.org/SDL3/SDL_CreateSoftwareRenderer">SDL_CreateSoftwareRenderer - SDL Wiki</a>
<hr>
</body>
</html>
